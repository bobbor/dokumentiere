<!DOCTYPE html><html><head><meta charset="utf-8"><title>sources\src\foldercopy.js Dokumentation (Source)</title><link rel="stylesheet" href="../css/jquery.jscrollpane.css" media="all"><link rel="stylesheet" href="../css/style.css" media="all"><link rel="stylesheet" href="../css/font-awesome.css" media="all"><link rel="stylesheet" href="../css/sh.min.css" media="all"><script src="../js/sh_main.min.js"></script><script src="../js/sh_javascript.min.js"></script><script data-main="../js/main.js" src="../js/libs/require-jquery.js"></script><script>$(function() {
 if(location.hash) {
  var name = location.hash.substring(1, location.hash.length);
  $('a[name="'+name+'"]').addClass('highlight');
 }
})</script></head><body id="source" onload="sh_highlightDocument();"><div id="wrapper"><div id="main"><aside class="items"><header><h1><a href="../index.html"><em>Aperto</em><span><b>JS</b>Docs</span></a></h1></header><div id="filter"><form><div class="col col-3"><input type="search" placeholder="Suche" name="filter"><button><span>Los</span></button></div><div class="col col-9"><ul class="props"><li><input id="node-module" type="checkbox" name="node-module" checked><label for="node-module">node-module</label></li></ul></div></form></div><section data-type="node-module" data-name="tmpl" class="col col-3"><h1><a href="../node.tmpl.html">tmpl</a></h1><h2>node-module (node)</h2><p>gets the parsed comments and generates the html</p></section><section data-type="node-module" data-name="tags" class="col col-3"><h1><a href="../node.tags.html">tags</a></h1><h2>node-module (node)</h2><p>this parses the &quot;tags&quot;</p></section><section data-type="node-module" data-name="foldercopy" class="col col-3"><h1><a href="../node.foldercopy.html">foldercopy</a></h1><h2>node-module (node)</h2><p>copies the specified folder</p></section></aside><div id="content"><h1> <span>Source View</span>sources\src\foldercopy.js</h1><pre class="sh_javascript"><a name="line-1" data-line="1">//
</a><a name="line-2" data-line="2">// /--------------------------------------------\
</a><a name="line-3" data-line="3">// |                                            |
</a><a name="line-4" data-line="4">// | foldercopy.js                              |
</a><a name="line-5" data-line="5">// | part of &quot;dokumentiere&quot;                     |
</a><a name="line-6" data-line="6">// | licensed under GPLv2                       |
</a><a name="line-7" data-line="7">// |                                            |
</a><a name="line-8" data-line="8">// \--------------------------------------------/
</a><a name="line-9" data-line="9">
</a><a name="line-10" data-line="10">var fs = require( 'fs' );
</a><a name="line-11" data-line="11">var cwd = process.cwd();
</a><a name="line-12" data-line="12">var path = require( 'path' );
</a><a name="line-13" data-line="13">/*-
</a><a name="line-14" data-line="14"> * foldercopy
</a><a name="line-15" data-line="15"> [ node-module (node) ]
</a><a name="line-16" data-line="16"> : bobbor
</a><a name="line-17" data-line="17"> * copies the specified folder
</a><a name="line-18" data-line="18"> * it does it recursively from the source-folder to destination-folder including all files
</a><a name="line-19" data-line="19"> &gt; Usage
</a><a name="line-20" data-line="20"> | var fc = require('foldercopy');
</a><a name="line-21" data-line="21"> -*/
</a><a name="line-22" data-line="22">var foldercopy = {
</a><a name="line-23" data-line="23">	/*-
</a><a name="line-24" data-line="24">	 * recursiveCopy(folders, p, dest)
</a><a name="line-25" data-line="25">	 [ function (public) ]
</a><a name="line-26" data-line="26">	 * copies the specified folders
</a><a name="line-27" data-line="27">	 * the function looks in the source folder for the dirs and copies them recursively to the destination
</a><a name="line-28" data-line="28">	 &gt; Parameter
</a><a name="line-29" data-line="29">	 - folders (array) an array of folder names
</a><a name="line-30" data-line="30">	 - p (array) an array of foldernames, that get concatinated using path.sep
</a><a name="line-31" data-line="31">	 - dest (string) the destination folder
</a><a name="line-32" data-line="32">	 -*/
</a><a name="line-33" data-line="33">	recursiveCopy: function( folders, p, dest ) {
</a><a name="line-34" data-line="34">		var that = this;
</a><a name="line-35" data-line="35">		var base = __dirname + path.sep + p.join( path.sep );
</a><a name="line-36" data-line="36">		folders.forEach( function( elm, i, folders ) {
</a><a name="line-37" data-line="37">			that.copyFolder( base, elm, '', dest );
</a><a name="line-38" data-line="38">		} );
</a><a name="line-39" data-line="39">	},
</a><a name="line-40" data-line="40">	/*-
</a><a name="line-41" data-line="41">	 * copyFolder(base, folder, recurse, dest)
</a><a name="line-42" data-line="42">	 [ function (public) ]
</a><a name="line-43" data-line="43">	 * copies the specified folder
</a><a name="line-44" data-line="44">	 &gt; Parameter
</a><a name="line-45" data-line="45">	 - base (string) the base folder where to look
</a><a name="line-46" data-line="46">	 - folder (string) the name of the folder in &quot;base&quot; to copy
</a><a name="line-47" data-line="47">	 - recurse (string) how deep we have iterated (it gets appended to dest)
</a><a name="line-48" data-line="48">	 - dest (string) the destination folder
</a><a name="line-49" data-line="49">	 -*/
</a><a name="line-50" data-line="50">	copyFolder: function( base, folder, recurse, dest ) {
</a><a name="line-51" data-line="51">		var that = this;
</a><a name="line-52" data-line="52">		fs.mkdir( dest + path.sep + folder + path.sep + recurse, function() {
</a><a name="line-53" data-line="53">			fs.readdir( base + path.sep + folder + path.sep + recurse, function( err, files ) {
</a><a name="line-54" data-line="54">				iterator( files, function( item ) {
</a><a name="line-55" data-line="55">					fs.stat( base + path.sep + folder + path.sep + recurse + item, function( err, stat ) {
</a><a name="line-56" data-line="56">						if ( err ) {
</a><a name="line-57" data-line="57">							console.log( err );
</a><a name="line-58" data-line="58">							return;
</a><a name="line-59" data-line="59">						}
</a><a name="line-60" data-line="60">						if ( stat.isDirectory() ) {
</a><a name="line-61" data-line="61">							that.copyFolder( base, folder, recurse + item + path.sep, dest );
</a><a name="line-62" data-line="62">							return;
</a><a name="line-63" data-line="63">						}
</a><a name="line-64" data-line="64">						that.copyFile( base + path.sep + folder + path.sep + recurse, item, dest + path.sep + folder + path.sep + recurse );
</a><a name="line-65" data-line="65">					} );
</a><a name="line-66" data-line="66">				}, function() {} );
</a><a name="line-67" data-line="67">			} );
</a><a name="line-68" data-line="68">		} );
</a><a name="line-69" data-line="69">	},
</a><a name="line-70" data-line="70">	/*-
</a><a name="line-71" data-line="71">	 * copyFile(base, file, dest)
</a><a name="line-72" data-line="72">	 [ function (public) ]
</a><a name="line-73" data-line="73">	 * copies the specified file
</a><a name="line-74" data-line="74">	 &gt; Parameter
</a><a name="line-75" data-line="75">	 - base (array) the base folder where to look
</a><a name="line-76" data-line="76">	 - file (array) the name of the file in &quot;base&quot; to copy
</a><a name="line-77" data-line="77">	 - dest (string) the destination folder
</a><a name="line-78" data-line="78">	 -*/
</a><a name="line-79" data-line="79">	copyFile: function( base, file, dest ) {
</a><a name="line-80" data-line="80">		fs.readFile( base + file, function( err, data ) {
</a><a name="line-81" data-line="81">			if ( err ) {
</a><a name="line-82" data-line="82">				console.log( err );
</a><a name="line-83" data-line="83">				return;
</a><a name="line-84" data-line="84">			}
</a><a name="line-85" data-line="85">			fs.writeFile( dest + file, data, function( o_O ) {
</a><a name="line-86" data-line="86">				if ( o_O ) {
</a><a name="line-87" data-line="87">					console.log( o_O );
</a><a name="line-88" data-line="88">					return;
</a><a name="line-89" data-line="89">				}
</a><a name="line-90" data-line="90">				// console.log('copied '+file+' to '+dest);
</a><a name="line-91" data-line="91">			} );
</a><a name="line-92" data-line="92">		} );
</a><a name="line-93" data-line="93">	}
</a><a name="line-94" data-line="94">};
</a><a name="line-95" data-line="95">
</a><a name="line-96" data-line="96">/*-
</a><a name="line-97" data-line="97"> * iterator(arr, fneach, fnend)
</a><a name="line-98" data-line="98"> [ function (private) ]
</a><a name="line-99" data-line="99"> * iterates over an array
</a><a name="line-100" data-line="100"> * during iteration it calls fneach for each element and fnend when iteration is done
</a><a name="line-101" data-line="101"> &gt; Parameter
</a><a name="line-102" data-line="102"> - arr (array) the array to iterate over
</a><a name="line-103" data-line="103"> - fneach (function) the function to call on each item
</a><a name="line-104" data-line="104"> - fnend (function) the function to call when iteration is done
</a><a name="line-105" data-line="105"> -*/
</a><a name="line-106" data-line="106">var iterator = function( arr, fneach, fnend ) {
</a><a name="line-107" data-line="107">	if ( !arr.length ) {
</a><a name="line-108" data-line="108">		fnend();
</a><a name="line-109" data-line="109">		return;
</a><a name="line-110" data-line="110">	}
</a><a name="line-111" data-line="111">	var item = arr.pop();
</a><a name="line-112" data-line="112">	fneach( item );
</a><a name="line-113" data-line="113">	iterator( arr, fneach, fnend );
</a><a name="line-114" data-line="114">};
</a><a name="line-115" data-line="115">
</a><a name="line-116" data-line="116">module.exports = foldercopy;
</a><a name="line-117" data-line="117">
</a></pre></div></div></div></body></html>